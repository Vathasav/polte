# Generic SSH options
Host *
  StrictHostKeyChecking no
  ControlMaster         auto
  ControlPath           .ssh_controlmaster/socket_%r@%h:%p
  ControlPersist        10h
  ForwardAgent          yes
  User                  cloud-user

# Access to puppet-node as bastion
#Host puppet-node
#  Hostname "(awk '/puppet-node/{split($2,a,/=/); print a[2]}' inventory/ooo_inventory)"

#Access cloud nodes via puppet node
Host *node*
  ProxyCommand ssh -F ssh.config -q puppet-node nc %h 22
